<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rooted Spaces | Bogot√° & Nilo</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind Config for Brand Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        rooted: {
                            green: '#1B3022',
                            terra: '#A45C40',
                            cream: '#F5F2ED',
                            burgundy: '#630D16',
                            sand: '#E8E4D9',
                            dark: '#111827'
                        }
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Montserrat"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Styles for Chart Containers */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utility for Background Images (Simulated with gradients for SPA stability) */
        .bg-hero-bogota {
            background: linear-gradient(rgba(27, 48, 34, 0.6), rgba(27, 48, 34, 0.4)), url('https://images.unsplash.com/photo-1596200230203-b0e6cb4006c6?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }
        .bg-hero-nilo {
            background: linear-gradient(rgba(164, 92, 64, 0.6), rgba(164, 92, 64, 0.4)), url('https://images.unsplash.com/photo-1500076656116-558758c991c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }

        /* Smooth Hide/Show Transitions */
        .fade-enter {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }
        .fade-enter-active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F5F2ED;
        }
        ::-webkit-scrollbar-thumb {
            background: #A45C40;
            border-radius: 4px;
        }
    </style>

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. Using Unicode icons. -->
    <!-- Chosen Palette: Rooted Spaces (Green #1B3022, Terra #A45C40, Cream #F5F2ED) -->
    <!-- Application Structure Plan:
        1. Navigation: Sticky, dual-focus (City vs Farm).
        2. Hero: Split screen concept to immediately sell the "Ecosystem" vision.
        3. Dashboard/Calculator: A "Direct Booking" calculator that uses Chart.js to visualize savings vs Airbnb.
        4. Interactive Gallery: JS-driven filtering for studios/rooms.
        5. Experience Radar: Canvas visualization of location benefits.
        6. Contextual Content: Sections for Rules, Values, and Experiences populated from source docs.
    -->
    <!-- Visualization & Content Choices:
        - Price Comparison: Bar Chart (Chart.js) -> Goal: Persuade user to book direct -> Shows fees vs savings.
        - Location Radar: Radar Chart (Chart.js) -> Goal: Show balance of amenities (Nature, Transport, Food).
        - Studio Specs: Interactive Cards -> Goal: Inform details (Sq meters, amenities) from Brochure.
    -->
</head>
<body class="bg-rooted-cream text-rooted-dark font-sans antialiased selection:bg-rooted-terra selection:text-white">

    <!-- Navigation -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-300 bg-rooted-cream/95 backdrop-blur-sm border-b border-rooted-terra/20 py-4">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="#" class="text-2xl font-serif font-bold text-rooted-green tracking-tight">
                Rooted<span class="text-rooted-terra">.</span>Spaces
            </a>
            
            <div class="hidden md:flex space-x-8 items-center font-medium text-sm tracking-wide">
                <a href="#bogota" class="hover:text-rooted-terra transition-colors">BOGOT√Å (Urban)</a>
                <a href="#nilo" class="hover:text-rooted-terra transition-colors">NILO (Rural)</a>
                <a href="#experiences" class="hover:text-rooted-terra transition-colors">EXPERIENCIAS</a>
                <a href="#about" class="hover:text-rooted-terra transition-colors">NOSOTROS</a>
                <button onclick="scrollToBooking()" class="bg-rooted-terra text-white px-6 py-2 rounded-full hover:bg-rooted-green transition-colors shadow-lg transform hover:-translate-y-0.5">
                    Reservar Ahora
                </button>
            </div>

            <!-- Mobile Menu Button (Unicode) -->
            <button class="md:hidden text-2xl text-rooted-green">‚ò∞</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-24 pb-12 lg:min-h-screen flex flex-col lg:flex-row">
        <!-- Left: Bogota -->
        <div class="w-full lg:w-1/2 bg-hero-bogota relative min-h-[50vh] flex items-center justify-center group overflow-hidden">
            <div class="absolute inset-0 bg-rooted-green/60 group-hover:bg-rooted-green/50 transition-colors duration-500"></div>
            <div class="relative z-10 text-center text-white p-8">
                <span class="uppercase tracking-[0.2em] text-sm opacity-90 mb-2 block">El Nido Urbano</span>
                <h2 class="text-4xl md:text-5xl font-serif font-bold mb-4">Rooted Bogot√°</h2>
                <p class="max-w-xs mx-auto text-sm md:text-base opacity-90 mb-6">Estancias productivas en Casa Normand√≠a. Conexi√≥n, dise√±o y ubicaci√≥n estrat√©gica.</p>
                <a href="#bogota" class="inline-block border border-white px-6 py-2 rounded hover:bg-white hover:text-rooted-green transition-colors">Explorar Ciudad</a>
            </div>
        </div>
        
        <!-- Right: Nilo -->
        <div class="w-full lg:w-1/2 bg-hero-nilo relative min-h-[50vh] flex items-center justify-center group overflow-hidden">
            <div class="absolute inset-0 bg-rooted-terra/60 group-hover:bg-rooted-terra/50 transition-colors duration-500"></div>
            <div class="relative z-10 text-center text-white p-8">
                <span class="uppercase tracking-[0.2em] text-sm opacity-90 mb-2 block">La Granja de Aprendizaje</span>
                <h2 class="text-4xl md:text-5xl font-serif font-bold mb-4">Rooted Nilo</h2>
                <p class="max-w-xs mx-auto text-sm md:text-base opacity-90 mb-6">Retiros regenerativos y sabidur√≠a rural. Desconexi√≥n para reconectar.</p>
                <a href="#nilo" class="inline-block border border-white px-6 py-2 rounded hover:bg-white hover:text-rooted-terra transition-colors">Explorar Campo</a>
            </div>
        </div>

        <!-- Center Overlay Badge -->
        <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20 hidden lg:block">
            <div class="bg-white p-4 rounded-full shadow-2xl">
                <div class="w-16 h-16 rounded-full border-2 border-dashed border-rooted-terra flex items-center justify-center text-2xl">
                    üå±
                </div>
            </div>
        </div>
    </header>

    <!-- Value Proposition / Benefits -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-serif text-rooted-green font-bold">Dise√±ado para el N√≥mada Consciente</h3>
                <p class="text-gray-600 mt-2">Un ecosistema que equilibra productividad y bienestar.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Benefit 1 -->
                <div class="text-center p-6 bg-rooted-cream/50 rounded-xl hover:shadow-lg transition-shadow">
                    <div class="text-4xl text-rooted-terra mb-4">üì∂</div>
                    <h4 class="font-bold mb-2">Wi-Fi 5G & Coworking</h4>
                    <p class="text-sm text-gray-600">Espacios optimizados para videollamadas y trabajo profundo en Normand√≠a.</p>
                </div>
                <!-- Benefit 2 -->
                <div class="text-center p-6 bg-rooted-cream/50 rounded-xl hover:shadow-lg transition-shadow">
                    <div class="text-4xl text-rooted-green mb-4">ü•¨</div>
                    <h4 class="font-bold mb-2">Alimentaci√≥n Consciente</h4>
                    <p class="text-sm text-gray-600">Men√∫s vegetarianos, huertas org√°nicas y conexi√≥n con el origen de los alimentos.</p>
                </div>
                <!-- Benefit 3 -->
                <div class="text-center p-6 bg-rooted-cream/50 rounded-xl hover:shadow-lg transition-shadow">
                    <div class="text-4xl text-rooted-terra mb-4">üßò</div>
                    <h4 class="font-bold mb-2">Wellness & Retiros</h4>
                    <p class="text-sm text-gray-600">Desde yoga al amanecer en Nilo hasta ba√±os de tina relajantes en Bogot√°.</p>
                </div>
                <!-- Benefit 4 -->
                <div class="text-center p-6 bg-rooted-cream/50 rounded-xl hover:shadow-lg transition-shadow">
                    <div class="text-4xl text-rooted-green mb-4">ü§ù</div>
                    <h4 class="font-bold mb-2">Comunidad & Familia</h4>
                    <p class="text-sm text-gray-600">Ambiente familiar seguro. Reglas claras para una convivencia arm√≥nica.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: BOGOT√Å -->
    <section id="bogota" class="py-20 bg-rooted-cream">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row gap-12 mb-16">
                <div class="md:w-1/2">
                    <span class="text-rooted-terra font-bold tracking-widest text-sm uppercase">Casa Normand√≠a</span>
                    <h2 class="text-4xl font-serif font-bold text-rooted-green mt-2 mb-6">Tu Hogar en Bogot√°</h2>
                    <p class="text-gray-700 leading-relaxed mb-6">
                        Ubicada estrat√©gicamente a 15 minutos del Aeropuerto El Dorado y el Centro Hist√≥rico. 
                        Casa Normand√≠a no es un hotel fr√≠o; es un hogar remodelado de los a√±os 70 que combina tradici√≥n con modernidad.
                        Ofrecemos estudios privados con acceso a jard√≠n, cocina vegetariana y lavander√≠a.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        <span class="bg-white px-4 py-2 rounded shadow-sm text-sm font-medium">‚ú® Jard√≠n Privado</span>
                        <span class="bg-white px-4 py-2 rounded shadow-sm text-sm font-medium">üõ°Ô∏è Barrio Seguro</span>
                        <span class="bg-white px-4 py-2 rounded shadow-sm text-sm font-medium">üß∫ Lavander√≠a</span>
                    </div>
                </div>
                <div class="md:w-1/2 flex items-center justify-center">
                     <!-- Location Radar Chart -->
                     <div class="w-full">
                        <h4 class="text-center text-sm font-bold text-gray-500 mb-4 uppercase">Radar de Ubicaci√≥n</h4>
                        <div class="chart-container">
                            <canvas id="locationRadar"></canvas>
                        </div>
                     </div>
                </div>
            </div>

            <!-- Studios Grid -->
            <h3 class="text-2xl font-serif font-bold text-rooted-green mb-8">Nuestros Estudios</h3>
            <div id="studios-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- JS will populate this -->
            </div>
        </div>
    </section>

    <!-- SECTION: NILO -->
    <section id="nilo" class="py-20 bg-rooted-green text-white">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row-reverse gap-12">
                <div class="md:w-1/2">
                    <span class="text-rooted-terra font-bold tracking-widest text-sm uppercase">Granja Educativa</span>
                    <h2 class="text-4xl font-serif font-bold mt-2 mb-6">Conexi√≥n en Nilo</h2>
                    <p class="text-rooted-cream/80 leading-relaxed mb-6">
                        M√°s que un alojamiento rural, Nilo es una escuela de vida. Participa en la "Ruta del Ma√≠z", 
                        aprende sobre herbolaria medicinal, o simplemente descansa rodeado de frutales. 
                        Un espacio para sanar y aprender de la tierra.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-center gap-3">
                            <span class="text-rooted-terra text-xl">üåø</span>
                            <div>
                                <strong class="block text-rooted-cream">Escuela de Hierbas</strong>
                                <span class="text-sm text-rooted-cream/60">Talleres de tinturas y medicina natural.</span>
                            </div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="text-rooted-terra text-xl">üåΩ</span>
                            <div>
                                <strong class="block text-rooted-cream">Ruta del Ma√≠z</strong>
                                <span class="text-sm text-rooted-cream/60">Experiencia gastron√≥mica desde la siembra a la arepa.</span>
                            </div>
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="text-rooted-terra text-xl">üçä</span>
                            <div>
                                <strong class="block text-rooted-cream">Cosecha Propia</strong>
                                <span class="text-sm text-rooted-cream/60">Recolecci√≥n de c√≠tricos de temporada.</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="md:w-1/2">
                    <!-- Activity Stats Chart -->
                    <div class="bg-white/5 p-6 rounded-xl border border-white/10">
                        <h4 class="text-center text-sm font-bold text-rooted-cream mb-4 uppercase">Calendario de Cosecha & Clima</h4>
                        <div class="chart-container">
                            <canvas id="niloChart"></canvas>
                        </div>
                        <p class="text-xs text-center mt-4 opacity-60">*El clima c√°lido de Nilo es ideal todo el a√±o.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: BOOKING & CALCULATOR -->
    <section id="booking" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-serif font-bold text-rooted-green">Reserva Inteligente</h2>
                <p class="text-gray-600 mt-2">Ah√≥rrate las comisiones de plataforma reservando directamente con nosotros.</p>
            </div>

            <div class="flex flex-col lg:flex-row gap-12 items-start">
                
                <!-- Calculator Controls -->
                <div class="w-full lg:w-1/3 bg-rooted-cream p-8 rounded-2xl shadow-sm border border-rooted-terra/10">
                    <h3 class="text-xl font-bold text-rooted-green mb-6 flex items-center gap-2">
                        <span>üßÆ</span> Cotizador
                    </h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Selecciona tu Espacio</label>
                            <select id="studioSelect" class="w-full p-3 rounded-lg border border-gray-300 focus:border-rooted-terra focus:ring-1 focus:ring-rooted-terra outline-none bg-white">
                                <option value="201" data-price="95000">Studio 201 (37m¬≤ - Premium)</option>
                                <option value="203" data-price="75000">Studio 203 (21m¬≤ - King)</option>
                                <option value="204" data-price="70000">Studio 204 (22m¬≤ - Cozy)</option>
                                <option value="101" data-price="120000">Apt 101 (2 Hab - Familiar)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">Duraci√≥n (Noches)</label>
                            <input type="range" id="nightsRange" min="1" max="30" value="7" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-rooted-terra">
                            <div class="flex justify-between text-sm mt-2 font-medium text-rooted-terra">
                                <span id="nightsValue">7 Noches</span>
                                <span>Estancia Media</span>
                            </div>
                        </div>

                        <div class="pt-4 border-t border-gray-200">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-600">Precio Total (Directo):</span>
                                <span id="directTotal" class="text-2xl font-bold text-rooted-green">$0 COP</span>
                            </div>
                            <button id="bookBtn" class="w-full bg-rooted-terra text-white font-bold py-4 rounded-lg hover:bg-rooted-green transition-all shadow-lg mt-4">
                                Solicitar Reserva
                            </button>
                            <p class="text-xs text-center mt-3 text-gray-500">Incluye Wi-Fi, Servicios y Limpieza semanal.</p>
                        </div>
                    </div>
                </div>

                <!-- Comparison Chart -->
                <div class="w-full lg:w-2/3">
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-gray-800">Comparativa de Costos</h3>
                            <span class="bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full">Ahorras 15%</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="priceComparisonChart"></canvas>
                        </div>
                        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
                            <p><strong>üí° Nota:</strong> Las plataformas (Airbnb/Booking) cobran tarifas de servicio tanto al anfitri√≥n como al hu√©sped. Reservando directo en <strong>Rooted Spaces</strong>, eliminamos intermediarios.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-rooted-dark text-rooted-cream py-12 border-t-4 border-rooted-terra">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <div>
                    <h3 class="text-2xl font-serif font-bold mb-4">Rooted Spaces</h3>
                    <p class="text-gray-400 text-sm mb-4">Un ecosistema de hospitalidad gestionado por GPMF. Conectando lo urbano y lo rural.</p>
                    <div class="flex gap-4 text-xl">
                        <!-- Unicode Socials -->
                        <a href="#" class="hover:text-rooted-terra">üì∑</a> <!-- IG -->
                        <a href="#" class="hover:text-rooted-terra">üíº</a> <!-- LinkedIn -->
                        <a href="#" class="hover:text-rooted-terra">üìß</a> <!-- Mail -->
                    </div>
                </div>
                <div>
                    <h4 class="font-bold mb-4 text-white">Enlaces R√°pidos</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="#bogota" class="hover:text-white transition-colors">Bogot√° Studios</a></li>
                        <li><a href="#nilo" class="hover:text-white transition-colors">Granja Nilo</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Reglas de Convivencia</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Gu√≠a Local</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4 text-white">Newsletter</h4>
                    <p class="text-xs text-gray-400 mb-4">Recibe nuestra "Gu√≠a Local de Bogot√°" gratis.</p>
                    <form onsubmit="event.preventDefault(); alert('¬°Gracias! Te hemos enviado la gu√≠a.');" class="flex gap-2">
                        <input type="email" placeholder="Tu correo..." class="bg-gray-800 border-none rounded px-4 py-2 text-sm w-full focus:ring-1 focus:ring-rooted-terra">
                        <button class="bg-rooted-terra px-4 py-2 rounded text-white font-bold hover:bg-white hover:text-rooted-terra transition-colors">‚Üí</button>
                    </form>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-12 pt-8 text-center text-xs text-gray-500">
                <p>&copy; 2026 Rooted Spaces Colombia. RNT Activo. Operado bajo principios de GPMF.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA SOURCE (From Source Documents) ---
        const studios = [
            {
                id: '201',
                name: 'Studio 201 - El Premium',
                area: '37m¬≤',
                price: 95000,
                image: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                features: ['Cama Doble', 'Vista al Jard√≠n', 'Tina Privada', 'Cocina Full'],
                desc: 'Espacioso, lleno de luz natural y perfecto para estancias largas. Tu propio apartamento dentro de casa.'
            },
            {
                id: '203',
                name: 'Studio 203 - King Comfort',
                area: '21m¬≤',
                price: 75000,
                image: 'https://images.unsplash.com/photo-1505693416388-b0346ef4143d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                features: ['Cama King Size', 'Ba√±o Privado', 'Kitchenette', 'Escritorio'],
                desc: 'Dise√±ado para el descanso profundo. La cama m√°s grande de la casa en un ambiente acogedor.'
            },
            {
                id: '204',
                name: 'Studio 204 - The Cozy',
                area: '22m¬≤',
                price: 70000,
                image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                features: ['Privacidad Total', 'Ba√±o Privado', 'Cocina B√°sica', 'Vista Interna'],
                desc: 'Ideal para viajeros solitarios o parejas pr√°cticas. Todo lo que necesitas en un espacio eficiente.'
            },
            {
                id: '101',
                name: 'Apt 101 - Familiar',
                area: '55m¬≤',
                price: 120000,
                image: 'https://images.unsplash.com/photo-1484154218962-a1c002085d2f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                features: ['2 Habitaciones', 'Salida al Jard√≠n', 'Cocina Completa', 'Sala de Estar'],
                desc: 'Espacio para toda la familia. Acceso directo a las zonas verdes y m√°xima independencia.'
            }
        ];

        // --- RENDER FUNCTIONS ---

        function renderStudios() {
            const grid = document.getElementById('studios-grid');
            grid.innerHTML = studios.map(studio => `
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow border border-gray-100 flex flex-col">
                    <div class="h-48 overflow-hidden bg-gray-200 relative group">
                        <img src="${studio.image}" alt="${studio.name}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        <div class="absolute bottom-0 left-0 bg-rooted-green text-white text-xs px-3 py-1 font-bold">
                            ${studio.area}
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col">
                        <h4 class="text-xl font-bold text-rooted-green mb-2">${studio.name}</h4>
                        <p class="text-sm text-gray-600 mb-4 flex-grow">${studio.desc}</p>
                        <div class="flex flex-wrap gap-2 mb-6">
                            ${studio.features.map(f => `<span class="text-xs bg-rooted-cream text-rooted-terra px-2 py-1 rounded font-medium">${f}</span>`).join('')}
                        </div>
                        <div class="mt-auto flex justify-between items-center pt-4 border-t border-gray-100">
                            <div>
                                <span class="text-xs text-gray-400 block">Desde</span>
                                <span class="font-bold text-rooted-green">$${(studio.price/1000).toFixed(0)}k <span class="text-xs font-normal">/noche</span></span>
                            </div>
                            <button onclick="selectStudio('${studio.id}')" class="text-sm border border-rooted-terra text-rooted-terra px-4 py-2 rounded hover:bg-rooted-terra hover:text-white transition-colors font-medium">
                                Ver Detalles
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function selectStudio(id) {
            // Update calculator
            const select = document.getElementById('studioSelect');
            select.value = id;
            updateCalculator();
            // Scroll to calculator
            document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
        }
        
        function scrollToBooking() {
             document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
        }

        // --- CHART INITIALIZATION ---

        let priceChart = null;
        let radarChart = null;
        let niloChart = null;

        function initCharts() {
            // 1. Radar Chart (Location)
            const ctxRadar = document.getElementById('locationRadar').getContext('2d');
            radarChart = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['Aeropuerto (15min)', 'Parques (19)', 'Mall (Salitre)', 'Centro (20min)', 'Seguridad', 'Silencio'],
                    datasets: [{
                        label: 'Casa Normand√≠a Score',
                        data: [9, 10, 8, 7, 9, 8],
                        fill: true,
                        backgroundColor: 'rgba(164, 92, 64, 0.2)',
                        borderColor: '#A45C40',
                        pointBackgroundColor: '#1B3022',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#1B3022'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { r: { suggestedMin: 0, suggestedMax: 10, ticks: { display: false } } }
                }
            });

            // 2. Nilo Chart (Line/Area - Climate/Harvest)
            const ctxNilo = document.getElementById('niloChart').getContext('2d');
            niloChart = new Chart(ctxNilo, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: 'Cosecha C√≠tricos',
                        data: [20, 30, 80, 90, 40, 20, 15, 15, 60, 80, 50, 30],
                        borderColor: '#F5F2ED',
                        backgroundColor: 'rgba(245, 242, 237, 0.2)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { labels: { color: '#fff' } },
                        tooltip: { callbacks: { label: (ctx) => `Intensidad: ${ctx.raw}%` } }
                    },
                    scales: {
                        x: { ticks: { color: 'rgba(255,255,255,0.7)' }, grid: { display: false } },
                        y: { display: false }
                    }
                }
            });

            // 3. Price Comparison Chart (Bar) - Initial empty render
            const ctxPrice = document.getElementById('priceComparisonChart').getContext('2d');
            priceChart = new Chart(ctxPrice, {
                type: 'bar',
                data: {
                    labels: ['Plataformas (Airbnb/Booking)', 'Rooted Spaces (Directo)'],
                    datasets: [{
                        label: 'Costo Total (COP)',
                        data: [0, 0],
                        backgroundColor: ['#d1d5db', '#1B3022'],
                        borderRadius: 6,
                        barThickness: 40
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) { label += ': '; }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP' }).format(context.parsed.y);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f3f4f6' } },
                        x: { grid: { display: false } }
                    },
                    animation: { duration: 500 }
                }
            });

            updateCalculator(); // Trigger initial calc
        }

        // --- LOGIC: CALCULATOR ---

        function updateCalculator() {
            const select = document.getElementById('studioSelect');
            const nightsInput = document.getElementById('nightsRange');
            const nightsDisplay = document.getElementById('nightsValue');
            const totalDisplay = document.getElementById('directTotal');
            const bookBtn = document.getElementById('bookBtn');

            const pricePerNight = parseInt(select.options[select.selectedIndex].dataset.price);
            const nights = parseInt(nightsInput.value);

            // Logic: Discounts for longer stays (Simulating Business Plan Strategy)
            let discountMultiplier = 1;
            if (nights >= 7) discountMultiplier = 0.90; // 10% off weekly
            if (nights >= 30) discountMultiplier = 0.80; // 20% off monthly

            const directTotal = (pricePerNight * nights) * discountMultiplier;
            const platformFee = 1.15; // Assuming 15% platform markup
            const platformTotal = directTotal * platformFee;

            // Update DOM
            nightsDisplay.textContent = `${nights} Noche${nights > 1 ? 's' : ''}`;
            totalDisplay.textContent = new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', maximumFractionDigits: 0 }).format(directTotal);
            
            // Update Whatsapp Link on Button
            const message = `Hola, estoy interesado en reservar el ${select.options[select.selectedIndex].text} por ${nights} noches. Vi el precio directo de ${new Intl.NumberFormat('es-CO', { style: 'currency', currency: 'COP', maximumFractionDigits: 0 }).format(directTotal)}.`;
            bookBtn.onclick = () => window.open(`https://wa.me/573000000000?text=${encodeURIComponent(message)}`, '_blank');

            // Update Chart
            priceChart.data.datasets[0].data = [platformTotal, directTotal];
            priceChart.update();
        }

        // --- EVENT LISTENERS ---

        document.addEventListener('DOMContentLoaded', () => {
            renderStudios();
            initCharts();

            // Inputs
            document.getElementById('studioSelect').addEventListener('change', updateCalculator);
            document.getElementById('nightsRange').addEventListener('input', updateCalculator);
        });

    </script>
</body>
</html>